# 🪶 德魯伊的旅程・強化版  
### NLP Lab 2 — 基於大型語言模型的互動敘事遊戲  

> 本專案為 **NLP Lab 2** 的延伸版本。  
> 利用大型語言模型（LLM）生成互動劇情與角色對話，  
> 玩家將扮演年輕的德魯伊學徒「努伊特」，在福爾摩沙的山林中與動物交流、學習自然，  
> 透過語言互動與行為抉擇，培養理解力與同理心，最終覺醒屬於自己的德魯伊之力。

---

## 專案概述  

本專案在原始版本「修行的德魯伊 (A Druid’s Journey)」基礎上進行全面升級，  
讓語言模型不僅生成故事，還能**評估玩家行為、調整劇情走向、生成隨機事件與反饋**。  

---

## 升級重點  

| 系統 | 功能說明 |
|------|----------|
| **森林隨機事件系統** | 每回合有機率觸發事件（暴風雨、迷路、動物遇險、陷阱等），玩家需做出選擇。 |
| **生態與同理心評分機制** | 根據玩家對動物與自然的行為，計算「同理心」與「生態平衡」分數。 |
| **動物情感反應系統** | 動物的態度、對話與互動結果會根據友誼度與玩家表現動態改變。 |
| **德魯伊技能拓展** | 「化獸術」與「動物朋友」的獲得方式加入更多敘事背景與道德意涵。 |
| **長老評語系統** | 結局由德魯伊長老生成一份反思報告，回顧玩家的精神與價值成長。 |
| **動態語言生成** | GPT 模型根據玩家輸入即時生成對話與劇情反應。 |
| **多重結局** | 根據理解度、友誼度、同理心與隨機事件結果，生成不同結局。 |

---

## 專案結構  
```text
nlp-lab2-druid-enhanced/
│
├── corpora/
│   └── druid/
│       ├── animal/               # JSON data for each animal
│       └── user_prompt/          # Text prompts for key events
│
├── lab2_config.json              # Configuration for model and directories
├── main.py                       # Main game logic (enhanced)
├── lab2_output/                  # Generated states and summaries
└── README.md
```
---
## 執行方式
```bash
# 1. 複製此專案
git clone https://github.com/<你的帳號>/ntu-nlp-lab2-druid-enhanced.git
cd ntu-nlp-lab2-druid-enhanced

# 2. 安裝必要套件
pip install openai tiktoken

# 3. 執行遊戲
python main.py

```
執行後依提示輸入你的 OpenAI API Key，即可開始旅程。

---

## 遊戲流程

- 選擇「開始新的旅程」或「讀取存檔」

- 在森林中探索，發現新的動物

- 向動物學習以提升「理解度」

- 透過行動與語言互動提升「友誼度」與「同理心」

- 觸發森林隨機事件，影響遊戲進展

- 覺醒「化獸術」或召喚「動物朋友」

- 完成修行後，獲得長老的評語與最終結局

--- 

## 範例遊玩片段
```text
努伊特在森林裡遇到了一隻低調蜷縮的石虎！

石虎詢問努伊特：「石虎的食物來源包括哪些？」
努伊特回答：「嚙齒類、鳥類、魚類、爬行類及小型哺乳動物。」

石虎對努伊特的回答相當滿意。
努伊特的理解度從 0 上升到 5。
.
.
.
在石虎的引導下，努伊特領悟了自然的節奏，
學會了「化獸術」，化身為台灣雲豹。
```

